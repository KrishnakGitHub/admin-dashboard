{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/workspace/dashboard/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ubuntu/workspace/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ubuntu/workspace/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import AuthContext from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;useEffect(function(){getNotes();},[]);var getNotes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://8000-autumn-night-66818328.eu-ws4.runcode.io/api/notes/',{method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+String(authTokens.access)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(response.status===200){setNotes(data);}else if(response.statusText==='Unauthorized'){logoutUser();}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getNotes(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"You are logged to the home page!\"}),/*#__PURE__*/_jsx(\"ul\",{children:notes.map(function(note){return/*#__PURE__*/_jsx(\"li\",{children:note.body},note.id);})})]});};export default HomePage;","map":{"version":3,"sources":["/home/ubuntu/workspace/dashboard/frontend/src/pages/HomePage.js"],"names":["React","useState","useEffect","useContext","AuthContext","HomePage","notes","setNotes","authTokens","logoutUser","getNotes","fetch","method","headers","String","access","response","json","data","status","statusText","map","note","body","id"],"mappings":"iXAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,UAApC,KAAqD,OAArD,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,cAAwBJ,QAAQ,CAAC,EAAD,CAAhC,wCAAKK,KAAL,eAAYC,QAAZ,eACA,gBAA+BJ,UAAU,CAACC,WAAD,CAAzC,CAAKI,UAAL,aAAKA,UAAL,CAAiBC,UAAjB,aAAiBA,UAAjB,CAEAP,SAAS,CAAC,UAAK,CACXQ,QAAQ,GACX,CAFQ,CAEN,EAFM,CAAT,CAKA,GAAIA,CAAAA,QAAQ,0FAAG,2KACUC,CAAAA,KAAK,CAAC,iEAAD,CAAoE,CAC1FC,MAAM,CAAC,KADmF,CAE1FC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,UAAYC,MAAM,CAACN,UAAU,CAACO,MAAZ,CAF9B,CAFkF,CAApE,CADf,QACPC,QADO,qCAQMA,CAAAA,QAAQ,CAACC,IAAT,EARN,QAQPC,IARO,eAUX,GAAGF,QAAQ,CAACG,MAAT,GAAoB,GAAvB,CAA2B,CACvBZ,QAAQ,CAACW,IAAD,CAAR,CACH,CAFD,IAEM,IAAGF,QAAQ,CAACI,UAAT,GAAwB,cAA3B,CAA0C,CAC5CX,UAAU,GACb,CAdU,sDAAH,kBAARC,CAAAA,QAAQ,0CAAZ,CAkBA,mBACI,oCACI,uDADJ,cAII,oBACKJ,KAAK,CAACe,GAAN,CAAU,SAAAC,IAAI,qBACX,oBAAoBA,IAAI,CAACC,IAAzB,EAASD,IAAI,CAACE,EAAd,CADW,EAAd,CADL,EAJJ,GADJ,CAYH,CAvCD,CAyCA,cAAenB,CAAAA,QAAf","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport AuthContext from '../context/AuthContext';\n\nconst HomePage = () => {\n    let [notes, setNotes] = useState([])\n    let {authTokens, logoutUser} = useContext(AuthContext)\n\n    useEffect(()=> {\n        getNotes()\n    }, [])\n\n\n    let getNotes = async() =>{\n        let response = await fetch('https://8000-autumn-night-66818328.eu-ws4.runcode.io/api/notes/', {\n            method:'GET',\n            headers:{\n                'Content-Type':'application/json',\n                'Authorization':'Bearer ' + String(authTokens.access)\n            }\n        })\n        let data = await response.json()\n\n        if(response.status === 200){\n            setNotes(data)\n        }else if(response.statusText === 'Unauthorized'){\n            logoutUser()\n        }\n        \n    }\n\n    return (\n        <div>\n            <p>You are logged to the home page!</p>\n\n\n            <ul>\n                {notes.map(note => (\n                    <li key={note.id} >{note.body}</li>\n                ))}\n            </ul>\n        </div>\n    )\n}\n\nexport default HomePage\n"]},"metadata":{},"sourceType":"module"}